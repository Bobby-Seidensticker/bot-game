<!DOCTYPE html>
<head>
  <link href="styles/main.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>  
  
</head>

<body>

  <script id="item-slot-template" type="text/template">
    <% if (model) { %>
      <img src="assets/<%= utils.spaceToUnderscore(model.name) %>.png" />
      <div class="corner corner-level"><%= model.level %></div>
      <div class="xpbar" style="width: <%= 63 * model.pctLeveled() %>px;"></div>
      <div class="filter"></div>
      <div class="corner corner-x">X</div>
    <% } %>
  </script>

  <script id="item-tab-template" type="text/template">
    <div class="container equipped">
      <div class="header">Equipped Gear</div>
      <img src="assets/gearslots.svg" style="display:block; opacity:0.4;"/>
    </div>

    <div class="container skillchain">
      <div class="header">Equipped Skills</div>
      <!--img src="assets/skillslots.svg" style="display:block; opacity:0.4;"/ -->      
    </div>

    <div class="container unequipped">
      <div class="header">Unequipped Items</div>
    </div>
  </script>

  <script id="card-tab-template" type="text/template">
    <div class="container equipped">
      <div class="header">Equipped Gear</div>
      <img src="assets/gearslots.svg" style="display:block; opacity:0.4;"/>      
    </div>

    <div class="container skillchain">
      <div class="header">Equipped Skills</div>
      <!--img src="assets/skillslots.svg" style="display:block; opacity:0.4;"/ -->            
    </div>

    <div class="container equipped-cards">
      <div class="header">Equipped Cards</div>
    </div>

    <div class="container unequipped">
      <div class="header">Unequipped Cards</div>
    </div>
  </script>

  <script id="info-box-template" type="text/template">
    <% if (model) { %>
      <% if (model.itemType && model.itemType !== 'card') { %>
        <div class="titlebox"><%= namespace.bot.utils.firstCap(model.name) %></div>
        <% if (model.itemType === "armor") { %>
          <div class="infoitem"><%= namespace.bot.utils.firstCap(model.type) %> Armor</div>
        <% } else if (model.itemType === "weapon") { %>
          <div class="infoitem"><%= namespace.bot.utils.firstCap(model.type) %> Weapon</div>
        <% } else if (model.itemType === "skill") { %>
          <div class="infoitem"><%= namespace.bot.utils.firstCap(model.class) %> Skill</div>
        <% } %>
        <div class="infoitem">Level <%= model.level %></div>
        <div class="infoitem">XP <%= model.xp %> / <% print(model.getNextLevelXp()); %></div>
        <div class="xpbox"><div class="xpearned" style="width: <%= (model.xp / model.getNextLevelXp()) * 100 %>px"></div></div>
        <% if (model.disabled) { %>
        <div class="infoitem disabled">Skill Cannot Be Used Because Wrong Weapon Type Equipped</div>
        <% } %>
        <div class="mods">
        <% _.each(namespace.bot.utils.prettifyMods(model.baseMods, model.level), function(modstr) { %>
          <div class="mod"><%= modstr %></div>
        <% }); %>
        <div class="infoitem">Next Level: </div>
        <% _.each(namespace.bot.utils.prettifyPerLvlMods(model.baseMods), function(modstr) {%>
        <div class="perLvlMod"><%= modstr %></div>
        <% }); %>
        </div>
      <% } else { %>
        <div class="titlebox"><%= namespace.bot.utils.firstCap(model.name) %></div>
        <div class="infoitem"><%= namespace.bot.utils.firstCap(model.slot) %> Card</div>
        <div class="infoitem">Level <%= model.level %></div>
        <div class="infoitem"><%= model.qp %> / <% print(model.getNextLevelQp()) %> to Level Up</div>
        <div class="xpbox"><div class="xpearned" style="width: <%= model.qp / model.getNextLevelQp() * 100 %>px"></div></div>
        <div class="mods">
        <% _.each(namespace.bot.utils.prettifyMods(model.mods, model.level), function(modstr) {%>
          <div class="mod"><%= modstr %></div>
         <% }); %>
          <div class="infoitem">Next Level: </div>
          <% _.each(namespace.bot.utils.prettifyPerLvlMods(model.mods, model.level), function(modstr) {%>
            <div class="perLvlMod"><%= modstr %></div>
          <% }); %>
        </div>
      <% } %>
      <% if (model.flavor) { %>
        <div class="infoitem flavor"><%= model.flavor %></div>
      <% } %>
      <% if (model.itemType === 'skill' && model.equipped) { %>
        <div class="infoitem skilldmg">Total Damage: <%= model.getTotalDmg() %></div>
        <div class="infoitem skilldmg">DPS: <%= model.getDps() %></div>      
      <% } %>
    <% } %>
  </script>

  <script id="card-inventory-info-box-template" type="text/template">
    <h3><%= model.name %></h3>
    <div class="mods">
      <div>Level <%= model.level %></div>
      <% _.each(model.mods, function(mod) { %>
        <div><%= mod.def %></div>
      <% }); %>
    </div>
  </script>

  <script id="kv-table-template" type="text/template">
    <table>
    <% _.each(data, function(value, key) { %>
        <tr><th><%= utils.firstCap(key) %></th></tr>
        <% _.each(value, function(val) { %>
            <tr><td><%= val[0] %></td><td><%= val[1] %></td></tr>
        <% }); %>
    <% }); %>
    </table><table>    
    <% _.each(skilldata, function(value, key) { %>
        <tr><th><%= utils.firstCap(key) %></th></tr>
        <% _.each(value, function(val) { %>
            <tr><td><%= val[0] %></td><td><%= val[1] %></td></tr>
        <% }); %>
    <% }); %>        
    </table>
  </script>

  <script id="hero-footer-template" type="text/template">
    <table>
      <tbody>
        <tr><td>Health</td>  <td class="hp"><% print(Math.ceil(hp)) %></td>      <td>/</td> <td><%= spec.maxHp %></td></tr>
        <tr><td>Mana</td>    <td class="mana"><% print(Math.ceil(mana)) %></td>  <td>/</td> <td><%= spec.maxMana %></td></tr>
        <tr><td>Level</td>    <td class="level"><%= spec.level %></td></tr>
        <tr><td>Xp</td>    <td class="xp"><% print(Math.floor(spec.xp)) %></td>  <td>/</td> <td><% print(spec.getNextLevelXp()) %></td></tr>
      </tbody>
    </table>
  </script>

  <script id="zone-footer-template" type="text/template">
    <table>
      <tbody>
        <tr>
          <td>Zone</td><td><%= name %></td>
        </tr>
        <tr>
          <td>Level</td><td><%= level %></td>
        </tr>
        <tr>
          <td>Room</td><td><% print(heroPos + 1) %> / <% print(rooms.length) %></td>
        </tr>
        <tr>
          <td>Monsters</td><td><% print(liveMons().length) %> / <% print(ensureRoom().monsters.length) %></td>
        </tr>

      </tbody>
    </table>
  </script>

  <script id="skillchain-footer-template" type="text/template">
    <% _.each(data, function(skill) { %>
    <div class="skill">
      <div class="box">
        <img src="assets/<%= utils.spaceToUnderscore(skill.name) %>.png" />
        <div class="cooldown"></div>
      </div>
      <div class="use-holder"><div class="use-bar"></div></div>
    </div>
    <% }); %>
  </script>

  <script id="buttons-footer-template" type="text/template">
    <div class="config-button noselect">Config</div>
    <div class="stats-button noselect">Stats</div>
    <div class="inv-button noselect">Inv</div>
    <div class="help-button noselect">Help</div>
    <div class="map-button noselect">Map</div>
    <div class="cards-button noselect">Cards</div>
  </script>

  <script id="zone-map-tab-template" type="text/template">
    <img />
    Zone Name: <%= name %>,
    Level: <%= level %>
    <br/>
    Rooms: <%= roomCount %>,
    Boss: <%= boss %>
  </script>

  <script id="inv-menu-item-template" type="text/template">
    <div class="item-header">
      <%= name %> - level <span class="level"></span>
    </div>
    <div class="item-body">
      <div class="item-mid">
        <img src="assets/<%= utils.spaceToUnderscore(name) %>.png" height="90" width="90">
        <div class="item-mid-text">
          Type: <%= itemType %><br/><%= midExtra %> 
        </div>
      </div>
      <div class="item-affixes">
      </div>
      <div class="item-buttonbox">
        <%= buttons %>
      </div>
    </div>
  </script>

  <script id="inv-menu-item-xp" type="text/template">
    <span class="xp">0</span> / <span class="nextLevelXp">?</span> XP
  </script>

  <script id="inv-menu-item-buttons-template" type="text/template">
    <input class="item-button level-up" value="Level Up" type="button" disabled/>
    <input class="item-button equip" value="Equip" type="button" />
  </script>

  <script id="craft-menu-item-buttons-template" type="text/template">
    <input class="item-button craft" value="Craft" type="button" disabled />
    <input class="item-button scrap" value="Scrap" type="button" />
  </script>

  <script id="inv-menu-template" type="text/template">
    <div class="inv-content">
      <% _.each(groups, function(group) { %>
      <div class="item-group <%= group %>">
        <div class="item-group-header">
          <% print(group[0].toUpperCase() + group.slice(1)) %>
        </div>
        <div class="item-group-content">
        </div>
      </div>
      <% }); %>
    </div>
  </script>

  <script id="craft-menu-template" type="text/template">
    <div class="craft-content">
      <% _.each(groups, function(group) { %>
      <div class="item-group <%= group %>">
        <div class="item-group-header">
          <% print(group[0].toUpperCase() + group.slice(1)) %>
        </div>
        <div class="item-group-content">
        </div>
      </div>
      <% }); %>
    </div>
  </script>

  <script id="lvlup-tab-template" type="text/template">
    <div class="lvlupcontent">
      <div class="lvlupitemholder">
        <div class="lvlupitemimg">
          <img src="http://img1.wikia.nocookie.net/__cb20080817200550/diablo/images/4/4f/D2-u-Treadsofcthon.gif" />
        </div>
        <div class="lvlupitemstats">
          Magic Shoes <br>
          + 5 Fire Damage<br>
          + 10 Armor<br>
        </div>
      </div>
      <div class="lvluprollbox">
        Affix on next level: <br><br>
        + 3 Fire Damage
      </div>
      <input type="button" value="Reroll" />
      <input type="button" value="Level Up" />
    </div>
  </script>

  <script id="settings-tab-template" type="text/template">
    <div class="settingscontent">
      <input type="button" value="Save" />
      <input type="button" value="Mute" />
    </div>
  </script>

  <script id="header-stats-template" type="text/template">
    <table>
      <tr>
        <td>Name</td>
        <td id="name"><%= name %></td>
      </tr>
      <tr>
        <td>Level</td>
        <td id="level"><%= level %></td>
      </tr>
      <tr>
        <td>Hp</td>
        <td id="hp"><%= hp %> / <%= maxHp %></td>
      </tr>
      <tr>
        <td>Mana</td>
        <td id="mana"><%= mana %> / <%= maxMana %></td>
      </tr>
      <tr>
        <td>Xp</td>
        <td id="xp"><%= xp %> / <%= nextLevelXp %></td>
      </tr>
    </table>
  </script>

  <script id="header-zone-stats-template" type="text/template">
    <table>
      <tr>
        <td>Zone</td>
        <td id="name"><%= name %></td>
      </tr>
      <tr>
        <td>Level</td>
        <td id="level"><%= level %></td>
      </tr>
      <tr>
        <td>Room</td>
        <td id="room"><%= heroPos + 1 %> / <%= roomCount %></td>
      </tr>
      <tr>
        <td>Monsters</td>
        <td id="monsters"><%= livingCount %> / <%= totalCount %></td>
      </tr>
    </table>
  </script>

  <script id="header-equipped-template" type="text/template">
    <% _.each(items, function(item, slot) { %>
    <div class="<%= slot %>">
      <img class="slot-background" src="assets/<%= 'empty-' + slot %>.svg" width="60" height="60" />
      <% if (item) { %>
      <img class="slot-img" src="assets/<%= item.get('name') %>.png" width="60" height="60" />
      <% } else { %>
      <img class="empty slot-img" width="60" height="60" />
      <% } %>
    </div>
    <% }); %>
  </script>

  <script id="header-skillchain-template" type="text/template">
    <% _.each([0, 1, 2, 3, 4, 5], function(i) { %>
    <div class="skill-slot <%= i %>"></div>
    <% }); %>
  </script>

  <script id="header-skill-template" type="text/template">
    <div class="veil"></div>
    <div class="img-holder">
      <img src="assets/<%= name %>.svg" />
    </div>
  </script>

  <script type="text/template" id="menu-tab-template">
    <td class="tab" id="<%- name %>"><%- name %></td>
  </script>

  <!-- Libs -->
  <script type="text/javascript" src="scripts/sugar.js"></script>

  <script type="text/javascript" src="scripts/libs/raf-shim.js"></script>
  <script type="text/javascript" src="scripts/libs/jquery.min.js"></script>
  <script type="text/javascript" src="scripts/libs/namespace-plus.js"></script>
  <script type="text/javascript" src="scripts/libs/sprintf.min.js"></script>
  <script type="text/javascript" src="scripts/libs/underscore.js"></script>
  <script type="text/javascript" src="scripts/libs/backbone.js"></script>
  <script type="text/javascript" src="scripts/backbone-mods.js"></script>
  <script type="text/javascript" src="scripts/libs/backbone.localStorage.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60405705-1', 'auto');
    ga('send', 'pageview');

  </script>
  
  <!-- Our files -->
  <script type="text/javascript" src="scripts/log.js"></script>
  <script type="text/javascript" src="scripts/prob.js"></script>
  <script type="text/javascript" src="scripts/itemref.js"></script>
  <script type="text/javascript" src="scripts/events.js"></script>

  <script type="text/javascript" src="scripts/utils.js"></script>

  <script type="text/javascript" src="scripts/bodies.js"></script>
  <script type="text/javascript" src="scripts/damage.js"></script>
  <script type="text/javascript" src="scripts/drops.js"></script>
  <script type="text/javascript" src="scripts/inventory.js"></script>
  <script type="text/javascript" src="scripts/entity.js"></script>
  <script type="text/javascript" src="scripts/attacks.js"></script>
  <script type="text/javascript" src="scripts/zone.js"></script>
  <script type="text/javascript" src="scripts/vis.js"></script>
  <script type="text/javascript" src="scripts/views.js"></script>
  <script type="text/javascript" src="scripts/main.js"></script>

  <!-- Entry point -->
  <script>
    $(namespace.bot.main.onReady);
  </script>

</body>
